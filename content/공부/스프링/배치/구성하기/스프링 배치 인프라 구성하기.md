- ⚠️ 6버전 이후로 방법이 좀 달라졌다... 주의하자.
- **기본 구성 제공 방법**
	- 아무것도 안붙이면 : 모든 것을 자동 구성 해준다.
	- `@EnableBatchProcessing`이나 `DefaultBatchConfiguration`을 사용하면 : 직접 구성해야 하며, JobRepository는 Resourceless한 구현체가 자동 삽입된다.
- **[[스프링 배치 JobRepository 구성하기|JobRepository 구성 방법]]**
	- **선언적 방법** : **`@EnableJdbcJobRepository`** / **`@EnableMongoJobRepository`** 를 사용
	- **프로그래매틱 방법** : `JdbcDefaultBatchConfiguration` / `MongoDefaultBatchConfiguration` `JdbcDefaultBatchConfiguration` / `MongoDefaultBatchConfiguration` 를 사용
- **정리**
	- 애노테이션 미사용 -> JdbcJobRepository 자동 구성
	- `@EnableBatchProcessing` -> DefaultBatchConfiguration 사용 -> ResourcelessJobRepository 구성
	- `@EnableBatchProcessing` + `@EnableJdbcJobRepository` -> JdbcJobRepository 자동 구성
- **결론**
	- 애노테이션을 사용하지 않고, 배치 관련 DataSource를 Primary로 만드는게 좋다.
	- 또는 애노테이션을 사용하지 않고, 배치 관련 DataSource에 `@BatchDataSource`를 붙인다.
## 다중 데이터소스의 경우
- `@BatchDataSource` 를 사용한 데이터소스를 우선 사용
- 없다면 `@Primary` 데이터소스를 사용
```java
@Configuration
public class DataSourceConfig {

    @Primary
    @Bean
    @ConfigurationProperties("spring.datasource.business")
    public DataSource businessDataSource() {
        return DataSourceBuilder.create().build();
    }

    @Primary
    @Bean
    public LocalContainerEntityManagerFactoryBean businessEntityManagerFactory(
            EntityManagerFactoryBuilder builder,
            DataSource businessDataSource
    ) {
        return builder
                .dataSource(businessDataSource)
                .packages("dompoo.springbatchdemo.application.entity")
                .persistenceUnit("business")
                .build();
    }

    @Primary
    @Bean
    public PlatformTransactionManager businessTransactionManager(EntityManagerFactory businessEntityManagerFactory) {
        return new JpaTransactionManager(businessEntityManagerFactory);
    }

    @BatchDataSource
    @Bean
    @ConfigurationProperties("spring.datasource.batch")
    public DataSource batchDataSource() {
        return DataSourceBuilder.create().build();
    }

    @Bean
    public PlatformTransactionManager batchTransactionManager(DataSource batchDataSource) {
        return new DataSourceTransactionManager(batchDataSource);
    }
}
```