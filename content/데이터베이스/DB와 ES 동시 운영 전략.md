- 상황 : ES를 조회용으로 사용했을 때, 데이터가 수정되면 ES에 최신 데이터를 어떻게 반영할까?
**Dual Write**
- 가장 쉬운 방법은 서버에서 데이터 수정시 ES도 같이 수정해주는 것이다.
- 하지만 그러면 두 수정 중 하나만 성공하는 정합성 불일치 문제가 발생할 수 있다.
**CDC**
- [[CDC]]를 활용하여 DB의 로그를 캡처, 변경 사항을 메시지 큐로 보내고 Consumer가 메시지를 받아 ES에 업데이트하는 방식도 있다.
- 이 방식은 당연히 구현이 어렵고 복잡도가 높다.
**배치 동기화**
- 주기적으로 DB 데이터를 ES에 반영하는 방법이다.
- 구현은 단순하나, 실시간성이 부족하다.
**ES 수정 큐**
- DB를 업데이트하고 업데이트 내역을 서버에서 바로 이벤트 발행한다.
- 해당 이벤트를 받아서 ES를 업데이트한다.
- 실패처리와 [[최종 일관성]]을 고려해야 한다.