- DI 컨테이너에서 빈은 단 한번 생성된다.
- 여러 곳에서 해당 빈을 조회한다.
- 이때 모든 곳에서 동일한 객체를 조회하는 것이다.
- 이것을 싱글톤이라고 부른다.

# 왜 싱글톤인가?

- DI 컨테이너라고 해도, 싱글톤일 필요는 없다.
- 다만 스프링은 온라인 서비스를 원활히 제공하기 위해 성능 최적화가 필수였다.
- 빠르기 위해 싱글톤을 사용한다.

# 어떻게 싱글톤인가?

- `@Configuration` 애노테이션을 사용하면 해당 IoC 객체를 CGLIB를 통해 조작한 것을 설정 클래스로 사용한다.
- 이 조작된 코드가 한 빈이 여러번 생성되는 것을 막는다.
- 따라서 `@Configuration` 를 사용하지 않아도 스프링 빈을 등록할 수는 있지만, 싱글톤 관련된 기능은 모두 제거된다.
    - 조회할 때마다 새로운 객체가 생성된다.

# 주의

- 싱글톤 덕분에 빠르지만, 여러 곳에서 동일한 객체를 참조할 수 있다.
- 따라서 해당 객체가 어떠한 상태를 갖도록 설계하면 문제가 생길 수 있다.
- 아래 방법들 중에 하나를 선택하자.
    - 무상태로 설계한다.
    - 상태를 갖는 불변객체로 설계한다.