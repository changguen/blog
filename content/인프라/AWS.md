> **왜 AWS를 사용해야 하는가?**
> 
> 
> 기업 수준에서는 빠르게 수평/수직 확장할 수 있다는 것이 큰 장점이다. (물리적 서버를 빠르게 늘릴 수는 없으니)
> 또한 초기에도 사용한 만큼만 돈을 지불하면 되므로 투자 비용이 없다.
> 
> 하지만 내 수준에서는 컴퓨터를 쉽게 구성하고, AWS의 다른 서비스들과 연계하여 빠르게 배포하고 관리할 수 있다는 것이 큰 장점인 것 같다.
> 

## 네트워크

---

![[AWS_image.png]]

### VPC(Virtual Private Cloud)

- 가상 네트워크 공간이다.
- VPC가 없다면 전체 네트워크 안에서 여러 인스턴스들이 얽혀있어야 한다.
- VPC 덕분에 각 네트워크를 구분하게 된다. (다른 사용자와 논리적으로 독립된 공간을 사용하게 된다.)

### Subnet

- VPC의 IP 주소를 더 작은 단위로 나눈 것이다.
- 리소스를 기능과 목적에 따라 나누기 위해 필요하다.
- 예를 들어, 서버 인스턴스는 외부에 열려있는 `public` 서브넷을, 데이터베이스 인스턴스는 외부에 닫혀있는 `private` 서브넷을 활용해볼 수 있다.

### Internet Gateway

- VPC와 인터넷 간의 양방향 통신 관문이다.
- public 서브넷 등이 여기와 연결된다.

### NAT Gateway

- VPC → 인터넷 단방향 통신 관문이다.
- private 서브넷 등이 여기와 연결된다.
- public 서브넷에 설치된다.

### Route Table

- 네트워크 트래픽이 어디로 나가야하는지 정해준다.
- 각 서브넷은 하나의 라우팅 테이블과 연결된다.
- 서브넷에서 발생한 트래픽을 인터넷 게이트웨이 / NAT 게이트웨이 / 다른 서브넷 등으로 연결해준다.
- 예를 들어, `public subnet`의 인터넷 트래픽은 IGW로, `priavte subnet` 의 인터넷 트래픽은 NAT로 보내게 된다.

## 보안

---

### Security Group

- 인스턴스 단위에서의 트래픽을 제어한다.
- 서버의 경우에 80포트는 전부 접근 가능, 22포트는 사내에서만 접근하도록 하는 식이다.
- 반드시 사용해야 하는 핵심 보안 계층이다.

### Network ACL

- 서브넷 수준에서 광범위하게 추가 규칙을 정의할 때 사용한다.
- 알려진 악성 IP를 차단하는 등으로 사용할 수 있다.

### IAM

- 누가, 무엇을 할 수 있는지를 나타내는 권한이다.
- 다음과 같은 구성요소로 이루어진다.
    - User: AWS와 상호작용하는 사람 또는 리소스
    - Group: User의 집합, 여러 User에게 동일한 권한을 쉽게 부여할 수 있다.
    - Role: 특정 개체(User, Group)이 임시로 다른 권한을 의임받아 사용할 수 있도록 한다. 자격증명을 저장하지 않고 임시로 발급받는다는 점에서 보안성이 좋다.
    - Policy: 권한 그 자체를 의미하는 JSON 문서이다. 위 3개 요소가 합쳐진 형태를 가진다.
- AWS 사용자에게 줄 수도 있고, EC2 인스턴스에게 줄 수도 있다.
    - 신입 개발자는 EC2 인스턴스는 접속할 수 있지만, RDS 에는 접속하지 못한다.
    - 개발서버 EC2 인스턴스는 EC2로 띄운 데이터베이스는 접속할 수 있지만, 운영서버 RDS 에 접속하지 못한다.

## 서비스

---

### EC2

- 클라우드 컴퓨터이다.
- 우리는 EC2 인스턴스를 생성하여 클라우드 컴퓨터를 한 대 빌릴 수 있다.
- EC2 인스턴스의 핵심 설정은 다음과 같다.
    - 인스턴스 유형: 어떤 특성의 컴퓨터를 빌릴지 결정한다. (범용/컴퓨팅집약/메모리집약)
    - 키 페어: 인스턴스에 안전하게 접속하기 위한 자격증명이다. ssh 접속 등에서 사용한다.
    - 보안 그룹: 인바운드/아웃바운드 규칙을 정의한다.
    - EBS: 스토리지이다.
    - AMI: 미리 정의된 인스턴스 생성 템플릿이다. OS등이 포함된다.

### S3

- 파일을 저장하는 스토리지이다.
- 이미지, 동영상같은 정적 파일 저장, 데이터 백업, 웹사이트 호스팅 등으로 활용할 수 있다.

### CloudFront

- CDN(Content Delivery Network) 서비스이다.
- 이미지, 동영상, API 응답등의 웹콘텐츠를 전 세계 사용자들에게 빠르고 안전하게 제공한다.
- 원본 서버가 아닌 가까운 엣지 로케이션에서 제공하여 응답속도를 개선한다.

### ElastiCache

- DB나 API 호출결과를 캐싱한다.
- Redis 같은 인메모리 데이터스토어를 완전 관리하영으로 제공한다.

### OpenSearch Service

- 대용량의 텍스트 데이터를 빠르게 검색하고 분석할 수 있도록 한다.

### CodeBuild/CodeDeploy/CodePipeline

- CI/CD 자동화 도구들이다.
- CodeBuild는 소스코드를 컴파일/테스트/빌드하여 배포가능한 결과물(아티팩트)를 만든다.
- CodeDeploy는 CodeBuild의 결과물인 아티팩트를 여러 AWS 서비스에 자동으로 배포한다.
    - 무중단 배포, 블루/그린 배포 전략등 여러가지를 지원한다.
- CodePipeline은 위 두 서비스를 파이프라인의 각 단계로 연결하고, 전체 프로세스를 자동화하고 시각적으로 보여주는 도구이다.

### CloudWatch

- AWS 리소스와 애플리케이션의 상태를 모니터링할 수 있는 서비스이다.
- 메트릭, 로그 등을 수집하고 보여줄 수 있으며 특정 상황에 알림을 보낼 수 있다.

## 기타

---

### AWS SDK

- 여러 언어로 AWS 관련 기능을 쉽게 사용할 수 있도록 만든 도구 모음이다.
- AWS SDK를 통해서 IAM 권한을 감지하고, 이를 통해서 다른 AWS 서비스에 요청을 보낼 수도 있다.
    - `cloudwatch micrometer`는 이런 방식으로 메트릭을 AWS cloudwatch 서비스에 보낸다. (IAM 설정 필요)